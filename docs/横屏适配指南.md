# H5 横屏适配指南

## 概述

本项目提供了完整的H5横屏适配解决方案，支持多种适配模式，让你的H5应用在横屏和竖屏下都能提供良好的用户体验。

## 适配方案

### 1. 响应式布局适配 (推荐)

**特点**: 根据屏幕方向自动调整布局，横屏时采用左右分栏，竖屏时采用上下布局。

**使用方法**:
```vue
<template>
  <OrientationAdapter mode="responsive">
    <div class="adaptive-flex">
      <div class="flex-main">主要内容</div>
      <div class="flex-sidebar">侧边内容</div>
    </div>
  </OrientationAdapter>
</template>
```

**CSS类名**:
- `.adaptive-flex`: 自适应Flex布局
- `.responsive-layout`: 响应式布局容器
- `.landscape-layout`: 横屏布局
- `.portrait-layout`: 竖屏布局

### 2. 横屏警告模式

**特点**: 横屏时显示提示用户旋转设备的遮罩层。

**使用方法**:
```vue
<OrientationAdapter mode="warning" :show-warning="true">
  <!-- 你的内容 -->
</OrientationAdapter>
```

### 3. 旋转适配模式

**特点**: 横屏时将整个内容旋转90度，保持竖屏的布局结构。

**使用方法**:
```vue
<OrientationAdapter mode="rotate">
  <!-- 你的内容 -->
</OrientationAdapter>
```

### 4. 强制竖屏模式

**特点**: 无论设备如何旋转，始终保持竖屏布局。

**使用方法**:
```vue
<OrientationAdapter mode="force-portrait">
  <!-- 你的内容 -->
</OrientationAdapter>
```

## CSS工具类

### 方向检测类

```css
.portrait-only    /* 仅在竖屏时显示 */
.landscape-only   /* 仅在横屏时显示 */
.hide-landscape   /* 横屏时隐藏 */
.show-landscape   /* 横屏时显示 */
```

### 布局类

```css
.responsive-layout    /* 响应式布局 */
.landscape-grid      /* 横屏网格布局 */
.adaptive-flex       /* 自适应Flex布局 */
.button-group        /* 按钮组布局 */
.form-layout         /* 表单布局 */
.card-container      /* 卡片容器布局 */
```

### 样式调整类

```css
.landscape-text-adjust     /* 横屏文字调整 */
.landscape-spacing-adjust  /* 横屏间距调整 */
.landscape-compact         /* 横屏紧凑布局 */
```

## 实际应用示例

### 1. 基础页面适配

```vue
<template>
  <div class="page">
    <van-nav-bar title="页面标题" class="nav-bar" />
    
    <OrientationAdapter mode="responsive">
      <div class="page-content adaptive-flex">
        <div class="main-content">
          <!-- 主要内容 -->
        </div>
        <div class="sidebar-content">
          <!-- 侧边内容 -->
        </div>
      </div>
    </OrientationAdapter>
  </div>
</template>

<style scoped>
@import '~/assets/css/orientation.css';

@media screen and (orientation: landscape) {
  .page-content {
    height: calc(100vh - 46px);
    overflow-y: auto;
  }
  
  .nav-bar {
    height: 46px;
  }
}
</style>
```

### 2. 表单页面适配

```vue
<template>
  <OrientationAdapter mode="responsive">
    <div class="form-layout">
      <div class="form-item">
        <van-field label="姓名" v-model="name" />
      </div>
      <div class="form-item">
        <van-field label="电话" v-model="phone" />
      </div>
      <div class="form-item form-item-full">
        <van-field label="地址" v-model="address" type="textarea" />
      </div>
    </div>
  </OrientationAdapter>
</template>
```

### 3. 图片上传页面适配

```vue
<template>
  <OrientationAdapter mode="responsive">
    <div class="upload-container adaptive-flex">
      <div class="upload-area">
        <van-uploader v-model="fileList">
          <!-- 上传组件 -->
        </van-uploader>
      </div>
      <div class="preview-area">
        <!-- 预览区域 -->
      </div>
    </div>
  </OrientationAdapter>
</template>
```

## 最佳实践

### 1. 设计原则

- **内容优先**: 确保重要内容在任何方向下都能正常显示
- **操作便利**: 横屏时按钮和交互元素要易于触达
- **视觉平衡**: 保持良好的视觉比例和间距
- **性能优化**: 避免过度复杂的布局变换

### 2. 布局建议

**竖屏布局**:
- 采用单列布局
- 垂直滚动
- 较大的触控区域

**横屏布局**:
- 采用双列或多列布局
- 充分利用水平空间
- 适当缩小元素间距

### 3. 交互优化

- 横屏时将主要操作按钮放在易于触达的位置
- 考虑手持设备时拇指的操作范围
- 提供清晰的视觉反馈

### 4. 测试建议

- 在不同尺寸的设备上测试
- 测试旋转过程中的动画效果
- 确保内容不会被截断或重叠

## 组件API

### OrientationAdapter

**Props**:
- `mode`: 适配模式 ('responsive' | 'warning' | 'rotate' | 'force-portrait')
- `showWarning`: 是否显示横屏警告 (boolean)

**Events**:
- `orientation-change`: 方向改变时触发

**Slots**:
- `default`: 默认插槽，放置需要适配的内容

**Methods**:
- `checkOrientation()`: 手动检查屏幕方向
- `isLandscape`: 当前是否为横屏 (readonly)

## 浏览器兼容性

- iOS Safari 9+
- Android Chrome 50+
- 微信内置浏览器
- 支付宝内置浏览器
- 其他现代移动浏览器

## 注意事项

1. **iOS设备**: 某些iOS版本可能需要额外的viewport设置
2. **Android设备**: 不同厂商的浏览器可能有细微差异
3. **微信浏览器**: 需要考虑微信的特殊限制
4. **性能**: 避免在orientation change事件中执行重型操作

## 故障排除

### 常见问题

1. **方向检测不准确**
   - 检查是否正确监听了orientationchange事件
   - 使用setTimeout延迟检测，确保orientation值已更新

2. **布局闪烁**
   - 添加CSS transition过渡效果
   - 使用transform代替改变布局属性

3. **内容被截断**
   - 检查容器高度设置
   - 确保overflow属性正确设置

4. **按钮位置不当**
   - 使用媒体查询调整按钮布局
   - 考虑设备的安全区域

### 调试技巧

1. 使用浏览器开发者工具的设备模拟器
2. 在真实设备上测试
3. 添加方向指示器帮助调试
4. 使用console.log记录方向变化

## 更新日志

- v1.0.0: 初始版本，支持基础横屏适配
- v1.1.0: 添加OrientationAdapter组件
- v1.2.0: 完善CSS工具类库
- v1.3.0: 优化性能和兼容性